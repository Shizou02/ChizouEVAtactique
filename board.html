<!doctype html>
<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>StratHub ‚Äî Board</title>
    <link rel="stylesheet" href="style.css" />
    <!-- Konva via CDN -->
    <script src="https://unpkg.com/konva@9/konva.min.js"></script>
    <!-- Google Tag Manager -->
    <script>
      (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({ "gtm.start": new Date().getTime(), event: "gtm.js" });
        var f = d.getElementsByTagName(s)[0],
          j = d.createElement(s),
          dl = l != "dataLayer" ? "&l=" + l : "";
        j.async = true;
        j.src = "https://www.googletagmanager.com/gtm.js?id=" + i + dl;
        f.parentNode.insertBefore(j, f);
      })(window, document, "script", "dataLayer", "GTM-585D88K6");
    </script>
    <!-- End Google Tag Manager -->
  </head>

  <body>
    <!-- Google Tag Manager (noscript) -->
    <noscript
      ><iframe
        src="https://www.googletagmanager.com/ns.html?id=GTM-585D88K6"
        height="0"
        width="0"
        style="display: none; visibility: hidden"
      ></iframe
    ></noscript>
    <!-- End Google Tag Manager (noscript) -->

    <!-- HEADER CENTR√â (branding) -->
    <div class="header header-centered">
      <div>
        <div class="brand">
          <img
            src="assets/logoStratHub.png"
            alt="StratHub"
            class="brand-logo"
          />
          <span class="brand-title">StratHub</span>
        </div>
        <div class="brand-subtitle">Plan tactique pour EVA</div>
      </div>
    </div>

    <!-- HEADER OUTIL (navigation + titre map) -->
    <div class="header">
      <a href="index.html" class="btn">‚Üê Maps</a>
      <div id="mapTitle" style="font-weight: 800">Board</div>
      <div style="opacity: 0.75">Drag & drop ‚Ä¢ Save/Load ‚Ä¢ Export</div>
    </div>

    <div class="board-wrap">
      <div class="panel">
        <div class="row">
          <button class="primary" id="toolSelect">S√©lection</button>
          <button id="toolDraw">Fl√®che/Ligne</button>
        </div>

        <label style="display: block; margin-top: 10px; font-weight: 800">
          Couleur fl√®che
        </label>
        <input type="color" id="arrowColorPicker" value="#ffffff" />
        <div class="row" style="margin-top: 10px">
          <button id="arrowSolid" class="primary">Fl√®che pleine</button>
          <button id="arrowDashed">Fl√®che pointill√©e</button>
        </div>

        <hr />

        <div style="font-weight: 800; margin-bottom: 6px">Mode</div>
        <select id="modeSelect">
          <option value="strat" selected>Mode Strat</option>
          <option value="train">Mode Entra√Ænement</option>
          <option value="coach">Mode Coaching</option>
        </select>

        <hr />

        <div id="modeTrainBlock">
          <div style="font-weight: 800; margin-bottom: 8px">
            üéì Mode entra√Ænement
          </div>

          <div class="row">
            <button id="setSolution">D√©finir la solution</button>
            <button class="primary" id="startTraining">Start 20s</button>
          </div>

          <div class="row">
            <button id="showSolution">Afficher la solution</button>
            <button class="danger" id="stopTraining">Stop</button>
          </div>

          <div id="trainingStatus" class="training-status">
            <span>Statut :</span>
            <strong id="trainingLabel">off</strong>
            <span class="training-pill" id="trainingTimer">20</span>
          </div>

          <hr />
        </div>

        <div id="modeCoachBlock" style="display: none">
          <div style="font-weight: 800; margin-bottom: 8px">
            üß† Mode coaching
          </div>
          <small class="muted"
            >Ici on ajoutera plus tard : Signal al√©atoire, reset, etc.</small
          >
          <hr />
        </div>
        <div style="font-weight: 800; margin-bottom: 8px">Noms des joueurs</div>

        <input
          id="nameP1"
          placeholder="Joueur 1"
          style="width: 100%; margin-bottom: 6px"
        />
        <input
          id="nameP2"
          placeholder="Joueur 2"
          style="width: 100%; margin-bottom: 6px"
        />
        <input
          id="nameP3"
          placeholder="Joueur 3"
          style="width: 100%; margin-bottom: 6px"
        />
        <input
          id="nameP4"
          placeholder="Joueur 4"
          style="width: 100%; margin-bottom: 6px"
        />

        <hr />

        <div style="font-weight: 800; margin-bottom: 8px">
          Ajouter des pions
        </div>
        <div class="row">
          <button id="addP1">Joueur 1</button>
          <button id="addP2">Joueur 2</button>
          <button id="addP3">Joueur 3</button>
          <button id="addP4">Joueur 4</button>
        </div>
        <div class="row">
          <button id="addEnemy">Ennemi</button>
          <button id="addObj">Objectif</button>
          <button id="addSmoke">Grenade</button>
        </div>

        <hr />

        <div class="row">
          <button id="undoBtn">‚Ü∂ Retour</button>
          <button id="redoBtn">‚Ü∑ R√©tablir</button>
        </div>

        <div style="font-weight: 800; margin-bottom: 8px">√âdition</div>
        <div class="row">
          <button id="rotateLeft">‚Ü∫ -15¬∞</button>
          <button id="rotateRight">‚Üª +15¬∞</button>
          <button class="danger" id="deleteSelected">Supprimer</button>
        </div>

        <div style="margin-top: 10px">
          <label style="display: block; font-weight: 800; margin-bottom: 6px"
            >Zoom</label
          >
          <input id="zoom" type="range" min="50" max="200" value="100" />
          <small class="muted"
            >Ajuste l‚Äôaffichage. (Les coordonn√©es restent coh√©rentes.)</small
          >
        </div>

        <hr />
        <div style="font-weight: 800; margin-bottom: 8px">Nom de la strat</div>
        <input
          id="stratName"
          placeholder="Ex: Cliff ‚Äî Plan A fast mid"
          style="
            width: 100%;
            margin-bottom: 10px;
            padding: 10px;
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.14);
            background: rgba(255, 255, 255, 0.06);
            color: #e8eef6;
          "
        />

        <div style="font-weight: 800; margin-bottom: 8px">
          Notes (Plan de round)
        </div>
        <textarea
          id="notes"
          placeholder="Ex: Plan A: 1 hold long, 2 split. Plan B: rotate si pick. Timing: 20s."
          style="
            width: 100%;
            min-height: 120px;
            resize: vertical;
            padding: 10px;
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.14);
            background: rgba(255, 255, 255, 0.06);
            color: #e8eef6;
          "
        ></textarea>
        <small class="muted">Ces notes seront sauvegard√©es dans le JSON.</small>

        <div style="font-weight: 800; margin-bottom: 8px">Sauvegarde</div>
        <div class="row">
          <button class="primary" id="saveJson">Sauvegarder (JSON)</button>
          <button id="exportPng">Exporter (PNG)</button>
        </div>
        <div style="margin-top: 8px">
          <label style="display: block; font-weight: 800; margin-bottom: 6px"
            >Charger une strat (JSON)</label
          >
          <input id="loadJson" type="file" accept="application/json" />
        </div>

        <hr />
        <small class="muted">
          Raccourcis : <kbd>Suppr</kbd> pour supprimer ‚Ä¢ Clique un pion pour le
          s√©lectionner.<br />
          Mode Fl√®che : clique-d√©place-rel√¢che pour tracer.
        </small>
      </div>

      <div class="canvas-area" id="stageParent"></div>
    </div>

    <footer class="footer footer--compact">
      ¬© 2026 ‚Äî StratHub ¬∑ Cr√©√© par Shizou
    </footer>

    <script src="app.js"></script>
  </body>
</html>
